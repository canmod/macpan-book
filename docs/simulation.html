<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Simulation | Generalized McMasterPandemic</title>
  <meta name="description" content="McMasterPandemic is a modelling tool that was rapidly developed to provide timely insights into the Covid-19 Pandemic in Canada. We are currently refactoring this tool so that it is faster and more general. This guide describes how to use this refactored version of McMasterPandemic." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Simulation | Generalized McMasterPandemic" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="McMasterPandemic is a modelling tool that was rapidly developed to provide timely insights into the Covid-19 Pandemic in Canada. We are currently refactoring this tool so that it is faster and more general. This guide describes how to use this refactored version of McMasterPandemic." />
  <meta name="github-repo" content="canmod/macpan-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Simulation | Generalized McMasterPandemic" />
  
  <meta name="twitter:description" content="McMasterPandemic is a modelling tool that was rapidly developed to provide timely insights into the Covid-19 Pandemic in Canada. We are currently refactoring this tool so that it is faster and more general. This guide describes how to use this refactored version of McMasterPandemic." />
  

<meta name="author" content="Steve Walker" />


<meta name="date" content="2022-08-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="flow-between-states.html"/>
<link rel="next" href="calibration.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">McMasterPandemic</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Fast and Flexible Modelling with McMasterPandemic</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#history-and-motivation"><i class="fa fa-check"></i><b>1.1</b> History and Motivation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#covid-19-forecasts"><i class="fa fa-check"></i><b>1.1.1</b> COVID-19 Forecasts</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#calibration-to-data"><i class="fa fa-check"></i><b>1.1.2</b> Calibration to data</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#speed"><i class="fa fa-check"></i><b>1.1.3</b> Speed</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#model-extensibility"><i class="fa fa-check"></i><b>1.1.4</b> Model Extensibility</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#dependencies"><i class="fa fa-check"></i><b>1.3</b> Dependencies</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#generalized-model-at-a-glance"><i class="fa fa-check"></i><b>1.4</b> Generalized Model at a Glance</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#vision-and-direction"><i class="fa fa-check"></i><b>1.5</b> Vision and Direction</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="model-initialization.html"><a href="model-initialization.html"><i class="fa fa-check"></i><b>2</b> Model Initialization</a><ul>
<li class="chapter" data-level="2.1" data-path="model-initialization.html"><a href="model-initialization.html#initial-parameter-vector"><i class="fa fa-check"></i><b>2.1</b> Initial Parameter Vector</a></li>
<li class="chapter" data-level="2.2" data-path="model-initialization.html"><a href="model-initialization.html#initial-state-vector"><i class="fa fa-check"></i><b>2.2</b> Initial State Vector</a></li>
<li class="chapter" data-level="2.3" data-path="model-initialization.html"><a href="model-initialization.html#start-and-end-date"><i class="fa fa-check"></i><b>2.3</b> Start and End Date</a></li>
<li class="chapter" data-level="2.4" data-path="model-initialization.html"><a href="model-initialization.html#next-steps"><i class="fa fa-check"></i><b>2.4</b> Next Steps</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="flow-between-states.html"><a href="flow-between-states.html"><i class="fa fa-check"></i><b>3</b> Flow Between States</a><ul>
<li class="chapter" data-level="3.1" data-path="flow-between-states.html"><a href="flow-between-states.html#state-flows"><i class="fa fa-check"></i><b>3.1</b> State Flows</a></li>
<li class="chapter" data-level="3.2" data-path="flow-between-states.html"><a href="flow-between-states.html#flow-matrix"><i class="fa fa-check"></i><b>3.2</b> Flow Matrix</a></li>
<li class="chapter" data-level="3.3" data-path="flow-between-states.html"><a href="flow-between-states.html#rate-matrix"><i class="fa fa-check"></i><b>3.3</b> Rate Matrix</a></li>
<li class="chapter" data-level="3.4" data-path="flow-between-states.html"><a href="flow-between-states.html#rate-matrix-dependence-on-state-variables-and-parameters"><i class="fa fa-check"></i><b>3.4</b> Rate Matrix Dependence on State Variables and Parameters</a></li>
<li class="chapter" data-level="3.5" data-path="flow-between-states.html"><a href="flow-between-states.html#connections-with-classic-mcmasterpandemic"><i class="fa fa-check"></i><b>3.5</b> Connections with Classic McMasterPandemic</a></li>
<li class="chapter" data-level="3.6" data-path="flow-between-states.html"><a href="flow-between-states.html#topological-sort"><i class="fa fa-check"></i><b>3.6</b> Topological Sort</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>4</b> Simulation</a><ul>
<li class="chapter" data-level="4.1" data-path="simulation.html"><a href="simulation.html#observation-error"><i class="fa fa-check"></i><b>4.1</b> Observation Error</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="calibration.html"><a href="calibration.html"><i class="fa fa-check"></i><b>5</b> Calibration</a><ul>
<li class="chapter" data-level="5.1" data-path="calibration.html"><a href="calibration.html#calibrating-with-observation-error"><i class="fa fa-check"></i><b>5.1</b> Calibrating with Observation Error</a></li>
<li class="chapter" data-level="5.2" data-path="calibration.html"><a href="calibration.html#loss-function-theory"><i class="fa fa-check"></i><b>5.2</b> Loss Function Theory</a><ul>
<li class="chapter" data-level="5.2.1" data-path="calibration.html"><a href="calibration.html#negative-binomial"><i class="fa fa-check"></i><b>5.2.1</b> Negative Binomial</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="convergence.html"><a href="convergence.html"><i class="fa fa-check"></i><b>6</b> Convergence</a></li>
<li class="chapter" data-level="7" data-path="time-varying-parameters.html"><a href="time-varying-parameters.html"><i class="fa fa-check"></i><b>7</b> Time Varying Parameters</a><ul>
<li class="chapter" data-level="7.1" data-path="time-varying-parameters.html"><a href="time-varying-parameters.html#model-of-piece-wise-time-variation"><i class="fa fa-check"></i><b>7.1</b> Model of Piece-Wise Time-Variation</a></li>
<li class="chapter" data-level="7.2" data-path="time-varying-parameters.html"><a href="time-varying-parameters.html#calibrating-time-variation-schedules"><i class="fa fa-check"></i><b>7.2</b> Calibrating Time-Variation Schedules</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="other-variables.html"><a href="other-variables.html"><i class="fa fa-check"></i><b>8</b> Other Variables</a><ul>
<li class="chapter" data-level="8.1" data-path="other-variables.html"><a href="other-variables.html#intermediate-results"><i class="fa fa-check"></i><b>8.1</b> Intermediate Results</a><ul>
<li class="chapter" data-level="8.1.1" data-path="other-variables.html"><a href="other-variables.html#sums-of-state-variables-and-parameters"><i class="fa fa-check"></i><b>8.1.1</b> Sums of State Variables and Parameters</a></li>
<li class="chapter" data-level="8.1.2" data-path="other-variables.html"><a href="other-variables.html#factrs"><i class="fa fa-check"></i><b>8.1.2</b> Factrs</a></li>
<li class="chapter" data-level="8.1.3" data-path="other-variables.html"><a href="other-variables.html#power-laws"><i class="fa fa-check"></i><b>8.1.3</b> Power Laws</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="other-variables.html"><a href="other-variables.html#additional-variables-in-the-simulation-history"><i class="fa fa-check"></i><b>8.2</b> Additional Variables in the Simulation History</a><ul>
<li class="chapter" data-level="8.2.1" data-path="other-variables.html"><a href="other-variables.html#simulation-history-expressions"><i class="fa fa-check"></i><b>8.2.1</b> Simulation History Expressions</a></li>
<li class="chapter" data-level="8.2.2" data-path="other-variables.html"><a href="other-variables.html#lagged-differencing"><i class="fa fa-check"></i><b>8.2.2</b> Lagged Differencing</a></li>
<li class="chapter" data-level="8.2.3" data-path="other-variables.html"><a href="other-variables.html#convolutions"><i class="fa fa-check"></i><b>8.2.3</b> Convolutions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ensemble-forecasts.html"><a href="ensemble-forecasts.html"><i class="fa fa-check"></i><b>9</b> Ensemble Forecasts</a><ul>
<li class="chapter" data-level="9.1" data-path="ensemble-forecasts.html"><a href="ensemble-forecasts.html#time-varying-ensemble-forecasts"><i class="fa fa-check"></i><b>9.1</b> Time-Varying Ensemble Forecasts</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>10</b> Vectors</a></li>
<li class="chapter" data-level="11" data-path="hazard-smoothing.html"><a href="hazard-smoothing.html"><i class="fa fa-check"></i><b>11</b> Hazard Smoothing</a></li>
<li class="chapter" data-level="12" data-path="state-initialization.html"><a href="state-initialization.html"><i class="fa fa-check"></i><b>12</b> State Initialization</a></li>
<li class="chapter" data-level="13" data-path="outflows.html"><a href="outflows.html"><i class="fa fa-check"></i><b>13</b> Outflows</a><ul>
<li class="chapter" data-level="13.1" data-path="outflows.html"><a href="outflows.html#accumulators"><i class="fa fa-check"></i><b>13.1</b> Accumulators</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="tmb-engine.html"><a href="tmb-engine.html"><i class="fa fa-check"></i><b>14</b> TMB Engine</a></li>
<li class="chapter" data-level="15" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>15</b> Examples</a><ul>
<li class="chapter" data-level="15.1" data-path="examples.html"><a href="examples.html#hello-world-simulating-an-sir-model"><i class="fa fa-check"></i><b>15.1</b> Hello World: Simulating an SIR Model</a></li>
<li class="chapter" data-level="15.2" data-path="examples.html"><a href="examples.html#si"><i class="fa fa-check"></i><b>15.2</b> SI</a></li>
<li class="chapter" data-level="15.3" data-path="examples.html"><a href="examples.html#seir"><i class="fa fa-check"></i><b>15.3</b> SEIR</a></li>
<li class="chapter" data-level="15.4" data-path="examples.html"><a href="examples.html#structure-two-strain-sir"><i class="fa fa-check"></i><b>15.4</b> Structure: Two-Strain SIR</a></li>
<li class="chapter" data-level="15.5" data-path="examples.html"><a href="examples.html#erlang-seir"><i class="fa fa-check"></i><b>15.5</b> Erlang SEIR</a></li>
<li class="chapter" data-level="15.6" data-path="examples.html"><a href="examples.html#sirv"><i class="fa fa-check"></i><b>15.6</b> SIRV</a></li>
<li class="chapter" data-level="15.7" data-path="examples.html"><a href="examples.html#variolation-model"><i class="fa fa-check"></i><b>15.7</b> Variolation model</a></li>
<li class="chapter" data-level="15.8" data-path="examples.html"><a href="examples.html#seird"><i class="fa fa-check"></i><b>15.8</b> SEIRD</a></li>
<li class="chapter" data-level="15.9" data-path="examples.html"><a href="examples.html#covid-seir"><i class="fa fa-check"></i><b>15.9</b> Covid SEIR</a></li>
<li class="chapter" data-level="15.10" data-path="examples.html"><a href="examples.html#bc-covid-omicron"><i class="fa fa-check"></i><b>15.10</b> BC Covid Omicron</a></li>
<li class="chapter" data-level="15.11" data-path="examples.html"><a href="examples.html#classic-mcmasterpandemic"><i class="fa fa-check"></i><b>15.11</b> Classic McMasterPandemic</a></li>
<li class="chapter" data-level="15.12" data-path="examples.html"><a href="examples.html#granich-hiv-model"><i class="fa fa-check"></i><b>15.12</b> Granich HIV Model</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>16</b> Troubleshooting</a><ul>
<li class="chapter" data-level="16.1" data-path="troubleshooting.html"><a href="troubleshooting.html#nan-valued-objective-function"><i class="fa fa-check"></i><b>16.1</b> NaN-Valued Objective Function</a><ul>
<li class="chapter" data-level="16.1.1" data-path="troubleshooting.html"><a href="troubleshooting.html#simulated-time-series-close-to-zero"><i class="fa fa-check"></i><b>16.1.1</b> Simulated time-series close to zero</a></li>
<li class="chapter" data-level="16.1.2" data-path="troubleshooting.html"><a href="troubleshooting.html#negative-rate-matrix-elements"><i class="fa fa-check"></i><b>16.1.2</b> Negative rate matrix elements</a></li>
<li class="chapter" data-level="16.1.3" data-path="troubleshooting.html"><a href="troubleshooting.html#optimizer-tries-very-large-dispersion-parameters"><i class="fa fa-check"></i><b>16.1.3</b> Optimizer tries very large dispersion parameters</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="troubleshooting.html"><a href="troubleshooting.html#non-positive-definite-covariance-matrix"><i class="fa fa-check"></i><b>16.2</b> Non-Positive Definite Covariance Matrix</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Generalized McMasterPandemic</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simulation" class="section level1 hasAnchor">
<h1><span class="header-section-number">4</span> Simulation<a href="simulation.html#simulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>All previous chapters were concerned with defining a compartmental model. In this chapter we switch to getting results from a defined model.</p>
<p>Once a model object is defined, it can be used to generate simulations using the <code>simulation_history</code> function.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="simulation.html#cb21-1"></a><span class="kw">simulation_history</span>(sir)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Date"],"name":[1],"type":["date"],"align":["right"]},{"label":["S"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["I"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["R"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["S_to_I"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020-03-11","2":"99.00000000","3":"1.000000","4":"0.00000000","5":"0.001000000","_rn_":"1"},{"1":"2020-03-12","2":"98.90100000","3":"1.089000","4":"0.01000000","5":"0.001089000","_rn_":"2"},{"1":"2020-03-13","2":"98.79329681","3":"1.185813","4":"0.02089000","5":"0.001185813","_rn_":"3"},{"1":"2020-03-14","2":"98.67614642","3":"1.291105","4":"0.03274813","5":"0.001291105","_rn_":"4"},{"1":"2020-03-15","2":"98.54874511","3":"1.405596","4":"0.04565919","5":"0.001405596","_rn_":"5"},{"1":"2020-03-16","2":"98.41022541","3":"1.530059","4":"0.05971514","5":"0.001530059","_rn_":"6"},{"1":"2020-03-17","2":"98.25965192","3":"1.665332","4":"0.07501574","5":"0.001665332","_rn_":"7"},{"1":"2020-03-18","2":"98.09601694","3":"1.812314","4":"0.09166906","5":"0.001812314","_rn_":"8"},{"1":"2020-03-19","2":"97.91823616","3":"1.971972","4":"0.10979220","5":"0.001971972","_rn_":"9"},{"1":"2020-03-20","2":"97.72514417","3":"2.145344","4":"0.12951192","5":"0.002145344","_rn_":"10"},{"1":"2020-03-21","2":"97.51549013","3":"2.333545","4":"0.15096536","5":"0.002333545","_rn_":"11"},{"1":"2020-03-22","2":"97.28793339","3":"2.537766","4":"0.17430080","5":"0.002537766","_rn_":"12"},{"1":"2020-03-23","2":"97.04103940","3":"2.759282","4":"0.19967846","5":"0.002759282","_rn_":"13"},{"1":"2020-03-24","2":"96.77327580","3":"2.999453","4":"0.22727128","5":"0.002999453","_rn_":"14"},{"1":"2020-03-25","2":"96.48300891","3":"3.259725","4":"0.25726581","5":"0.003259725","_rn_":"15"},{"1":"2020-03-26","2":"96.16850081","3":"3.541636","4":"0.28986306","5":"0.003541636","_rn_":"16"},{"1":"2020-03-27","2":"95.82790697","3":"3.846814","4":"0.32527942","5":"0.003846814","_rn_":"17"},{"1":"2020-03-28","2":"95.45927487","3":"4.176978","4":"0.36374756","5":"0.004176978","_rn_":"18"},{"1":"2020-03-29","2":"95.06054362","3":"4.533939","4":"0.40551734","5":"0.004533939","_rn_":"19"},{"1":"2020-03-30","2":"94.62954491","3":"4.919598","4":"0.45085673","5":"0.004919598","_rn_":"20"},{"1":"2020-03-31","2":"94.16400556","3":"5.335942","4":"0.50005271","5":"0.005335942","_rn_":"21"},{"1":"2020-04-01","2":"93.66155191","3":"5.785036","4":"0.55341213","5":"0.005785036","_rn_":"22"},{"1":"2020-04-02","2":"93.11971647","3":"6.269021","4":"0.61126249","5":"0.006269021","_rn_":"23"},{"1":"2020-04-03","2":"92.53594701","3":"6.790100","4":"0.67395270","5":"0.006790100","_rn_":"24"},{"1":"2020-04-04","2":"91.90761864","3":"7.350528","4":"0.74185370","5":"0.007350528","_rn_":"25"},{"1":"2020-04-05","2":"91.23204915","3":"7.952592","4":"0.81535898","5":"0.007952592","_rn_":"26"},{"1":"2020-04-06","2":"90.50651790","3":"8.598597","4":"0.89488490","5":"0.008598597","_rn_":"27"},{"1":"2020-04-07","2":"89.72828881","3":"9.290840","4":"0.98087087","5":"0.009290840","_rn_":"28"},{"1":"2020-04-08","2":"88.89463760","3":"10.031583","4":"1.07377927","5":"0.010031583","_rn_":"29"},{"1":"2020-04-09","2":"88.00288366","3":"10.823021","4":"1.17409510","5":"0.010823021","_rn_":"30"},{"1":"2020-04-10","2":"87.05042658","3":"11.667248","4":"1.28232531","5":"0.011667248","_rn_":"31"},{"1":"2020-04-11","2":"86.03478765","3":"12.566215","4":"1.39899780","5":"0.012566215","_rn_":"32"},{"1":"2020-04-12","2":"84.95365605","3":"13.521684","4":"1.52465994","5":"0.013521684","_rn_":"33"},{"1":"2020-04-13","2":"83.80493956","3":"14.535184","4":"1.65987678","5":"0.014535184","_rn_":"34"},{"1":"2020-04-14","2":"82.58681937","3":"15.607952","4":"1.80522862","5":"0.015607952","_rn_":"35"},{"1":"2020-04-15","2":"81.29780826","3":"16.740884","4":"1.96130814","5":"0.016740884","_rn_":"36"},{"1":"2020-04-16","2":"79.93681112","3":"17.934472","4":"2.12871697","5":"0.017934472","_rn_":"37"},{"1":"2020-04-17","2":"78.50318662","3":"19.188752","4":"2.30806169","5":"0.019188752","_rn_":"38"},{"1":"2020-04-18","2":"76.99680847","3":"20.503242","4":"2.49994921","5":"0.020503242","_rn_":"39"},{"1":"2020-04-19","2":"75.41812424","3":"21.876894","4":"2.70498163","5":"0.021876894","_rn_":"40"},{"1":"2020-04-20","2":"73.76820993","3":"23.308039","4":"2.92375057","5":"0.023308039","_rn_":"41"},{"1":"2020-04-21","2":"72.04881758","3":"24.794351","4":"3.15683097","5":"0.024794351","_rn_":"42"},{"1":"2020-04-22","2":"70.26241387","3":"26.332812","4":"3.40477448","5":"0.026332812","_rn_":"43"},{"1":"2020-04-23","2":"68.41220696","3":"27.919690","4":"3.66810260","5":"0.027919690","_rn_":"44"},{"1":"2020-04-24","2":"66.50215932","3":"29.550541","4":"3.94729950","5":"0.029550541","_rn_":"45"},{"1":"2020-04-25","2":"64.53698452","3":"31.220211","4":"4.24280492","5":"0.031220211","_rn_":"46"},{"1":"2020-04-26","2":"62.52212628","3":"32.922867","4":"4.55500702","5":"0.032922867","_rn_":"47"},{"1":"2020-04-27","2":"60.46371865","3":"34.652046","4":"4.88423569","5":"0.034652046","_rn_":"48"},{"1":"2020-04-28","2":"58.36852711","3":"36.400717","4":"5.23075615","5":"0.036400717","_rn_":"49"},{"1":"2020-04-29","2":"56.24387089","3":"38.161366","4":"5.59476331","5":"0.038161366","_rn_":"50"},{"1":"2020-04-30","2":"54.09752795","3":"39.926095","4":"5.97637697","5":"0.039926095","_rn_":"51"},{"1":"2020-05-01","2":"51.93762491","3":"41.686737","4":"6.37563792","5":"0.041686737","_rn_":"52"},{"1":"2020-05-02","2":"49.77251479","3":"43.434980","4":"6.79250529","5":"0.043434980","_rn_":"53"},{"1":"2020-05-03","2":"47.61064661","3":"45.162498","4":"7.22685509","5":"0.045162498","_rn_":"54"},{"1":"2020-05-04","2":"45.46043086","3":"46.861089","4":"7.67848008","5":"0.046861089","_rn_":"55"},{"1":"2020-05-05","2":"43.33010557","3":"48.522803","4":"8.14709097","5":"0.048522803","_rn_":"56"},{"1":"2020-05-06","2":"41.22760737","3":"50.140074","4":"8.63231900","5":"0.050140074","_rn_":"57"},{"1":"2020-05-07","2":"39.16045210","3":"51.705828","4":"9.13371974","5":"0.051705828","_rn_":"58"},{"1":"2020-05-08","2":"37.13562849","3":"53.213593","4":"9.65077802","5":"0.053213593","_rn_":"59"},{"1":"2020-05-09","2":"35.15950825","3":"54.657578","4":"10.18291395","5":"0.054657578","_rn_":"60"},{"1":"2020-05-10","2":"33.23777470","3":"56.032736","4":"10.72948973","5":"0.056032736","_rn_":"61"},{"1":"2020-05-11","2":"31.37537126","3":"57.334812","4":"11.28981709","5":"0.057334812","_rn_":"62"},{"1":"2020-05-12","2":"29.57647025","3":"58.560365","4":"11.86316520","5":"0.058560365","_rn_":"63"},{"1":"2020-05-13","2":"27.84446137","3":"59.706770","4":"12.44876885","5":"0.059706770","_rn_":"64"},{"1":"2020-05-14","2":"26.18195853","3":"60.772205","4":"13.04583655","5":"0.060772205","_rn_":"65"},{"1":"2020-05-15","2":"24.59082318","3":"61.755618","4":"13.65355860","5":"0.061755618","_rn_":"66"},{"1":"2020-05-16","2":"23.07220169","3":"62.656684","4":"14.27111478","5":"0.062656684","_rn_":"67"},{"1":"2020-05-17","2":"21.62657405","3":"63.475744","4":"14.89768161","5":"0.063475744","_rn_":"68"},{"1":"2020-05-18","2":"20.25381117","3":"64.213750","4":"15.53243906","5":"0.064213750","_rn_":"69"},{"1":"2020-05-19","2":"18.95323800","3":"64.872185","4":"16.17457656","5":"0.064872185","_rn_":"70"},{"1":"2020-05-20","2":"17.72370003","3":"65.453002","4":"16.82329841","5":"0.065453002","_rn_":"71"},{"1":"2020-05-21","2":"16.56363067","3":"65.958541","4":"17.47782843","5":"0.065958541","_rn_":"72"},{"1":"2020-05-22","2":"15.47111776","3":"66.391468","4":"18.13741383","5":"0.066391468","_rn_":"73"},{"1":"2020-05-23","2":"14.44396753","3":"66.754704","4":"18.80132852","5":"0.066754704","_rn_":"74"},{"1":"2020-05-24","2":"13.47976476","3":"67.051360","4":"19.46887556","5":"0.067051360","_rn_":"75"},{"1":"2020-05-25","2":"12.57592820","3":"67.284683","4":"20.13938915","5":"0.067284683","_rn_":"76"},{"1":"2020-05-26","2":"11.72976086","3":"67.458003","4":"20.81223598","5":"0.067458003","_rn_":"77"},{"1":"2020-05-27","2":"10.93849462","3":"67.574689","4":"21.48681601","5":"0.067574689","_rn_":"78"},{"1":"2020-05-28","2":"10.19932924","3":"67.638108","4":"22.16256291","5":"0.067638108","_rn_":"79"},{"1":"2020-05-29","2":"9.50946591","3":"67.651590","4":"22.83894398","5":"0.067651590","_rn_":"80"},{"1":"2020-05-30","2":"8.86613542","3":"67.618405","4":"23.51545989","5":"0.067618405","_rn_":"81"},{"1":"2020-05-31","2":"8.26662149","3":"67.541735","4":"24.19164393","5":"0.067541735","_rn_":"82"},{"1":"2020-06-01","2":"7.70827953","3":"67.424659","4":"24.86706128","5":"0.067424659","_rn_":"83"},{"1":"2020-06-02","2":"7.18855141","3":"67.270141","4":"25.54130787","5":"0.067270141","_rn_":"84"},{"1":"2020-06-03","2":"6.70497655","3":"67.081014","4":"26.21400928","5":"0.067081014","_rn_":"85"},{"1":"2020-06-04","2":"6.25519992","3":"66.859981","4":"26.88481942","5":"0.066859981","_rn_":"86"},{"1":"2020-06-05","2":"5.83697737","3":"66.609603","4":"27.55341923","5":"0.066609603","_rn_":"87"},{"1":"2020-06-06","2":"5.44817863","3":"66.332306","4":"28.21951526","5":"0.066332306","_rn_":"88"},{"1":"2020-06-07","2":"5.08678837","3":"66.030373","4":"28.88283832","5":"0.066030373","_rn_":"89"},{"1":"2020-06-08","2":"4.75090584","3":"65.705952","4":"29.54314205","5":"0.065705952","_rn_":"90"},{"1":"2020-06-09","2":"4.43874305","3":"65.361055","4":"30.20020158","5":"0.065361055","_rn_":"91"},{"1":"2020-06-10","2":"4.14862212","3":"64.997566","4":"30.85381213","5":"0.064997566","_rn_":"92"},{"1":"2020-06-11","2":"3.87897178","3":"64.617240","4":"31.50378779","5":"0.064617240","_rn_":"93"},{"1":"2020-06-12","2":"3.62832333","3":"64.221716","4":"32.14996019","5":"0.064221716","_rn_":"94"},{"1":"2020-06-13","2":"3.39530617","3":"63.812516","4":"32.79217736","5":"0.063812516","_rn_":"95"},{"1":"2020-06-14","2":"3.17864314","3":"63.391054","4":"33.43030252","5":"0.063391054","_rn_":"96"},{"1":"2020-06-15","2":"2.97714560","3":"62.958641","4":"34.06421306","5":"0.062958641","_rn_":"97"},{"1":"2020-06-16","2":"2.78970856","3":"62.516492","4":"34.69379948","5":"0.062516492","_rn_":"98"},{"1":"2020-06-17","2":"2.61530577","3":"62.065730","4":"35.31896440","5":"0.062065730","_rn_":"99"},{"1":"2020-06-18","2":"2.45298491","3":"61.607393","4":"35.93962170","5":"0.061607393","_rn_":"100"},{"1":"2020-06-19","2":"2.30186290","3":"61.142441","4":"36.55569563","5":"0.061142441","_rn_":"101"},{"1":"2020-06-20","2":"2.16112138","3":"60.671759","4":"37.16712004","5":"0.060671759","_rn_":"102"},{"1":"2020-06-21","2":"2.03000235","3":"60.196160","4":"37.77383763","5":"0.060196160","_rn_":"103"},{"1":"2020-06-22","2":"1.90780400","3":"59.716397","4":"38.37579923","5":"0.059716397","_rn_":"104"},{"1":"2020-06-23","2":"1.79387682","3":"59.233160","4":"38.97296320","5":"0.059233160","_rn_":"105"},{"1":"2020-06-24","2":"1.68761983","3":"58.747085","4":"39.56529480","5":"0.058747085","_rn_":"106"},{"1":"2020-06-25","2":"1.58847708","3":"58.258757","4":"40.15276565","5":"0.058258757","_rn_":"107"},{"1":"2020-06-26","2":"1.49593438","3":"57.768712","4":"40.73535322","5":"0.057768712","_rn_":"108"},{"1":"2020-06-27","2":"1.40951618","3":"57.277443","4":"41.31304035","5":"0.057277443","_rn_":"109"},{"1":"2020-06-28","2":"1.32878270","3":"56.785403","4":"41.88581478","5":"0.056785403","_rn_":"110"},{"1":"2020-06-29","2":"1.25332724","3":"56.293004","4":"42.45366881","5":"0.056293004","_rn_":"111"},{"1":"2020-06-30","2":"1.18277368","3":"55.800627","4":"43.01659885","5":"0.055800627","_rn_":"112"},{"1":"2020-07-01","2":"1.11677417","3":"55.308621","4":"43.57460512","5":"0.055308621","_rn_":"113"},{"1":"2020-07-02","2":"1.05500693","3":"54.817302","4":"44.12769133","5":"0.054817302","_rn_":"114"},{"1":"2020-07-03","2":"0.99717429","3":"54.326961","4":"44.67586435","5":"0.054326961","_rn_":"115"},{"1":"2020-07-04","2":"0.94300085","3":"53.837865","4":"45.21913396","5":"0.053837865","_rn_":"116"},{"1":"2020-07-05","2":"0.89223169","3":"53.350256","4":"45.75751261","5":"0.053350256","_rn_":"117"},{"1":"2020-07-06","2":"0.84463090","3":"52.864354","4":"46.29101517","5":"0.052864354","_rn_":"118"},{"1":"2020-07-07","2":"0.79998004","3":"52.380361","4":"46.81965871","5":"0.052380361","_rn_":"119"},{"1":"2020-07-08","2":"0.75807679","3":"51.898461","4":"47.34346232","5":"0.051898461","_rn_":"120"},{"1":"2020-07-09","2":"0.71873377","3":"51.418819","4":"47.86244693","5":"0.051418819","_rn_":"121"},{"1":"2020-07-10","2":"0.68177733","3":"50.941588","4":"48.37663512","5":"0.050941588","_rn_":"122"},{"1":"2020-07-11","2":"0.64704651","3":"50.466902","4":"48.88605100","5":"0.050466902","_rn_":"123"},{"1":"2020-07-12","2":"0.61439208","3":"49.994888","4":"49.39072002","5":"0.049994888","_rn_":"124"},{"1":"2020-07-13","2":"0.58367562","3":"49.525655","4":"49.89066890","5":"0.049525655","_rn_":"125"},{"1":"2020-07-14","2":"0.55476870","3":"49.059306","4":"50.38592546","5":"0.049059306","_rn_":"126"},{"1":"2020-07-15","2":"0.52755213","3":"48.595929","4":"50.87651852","5":"0.048595929","_rn_":"127"},{"1":"2020-07-16","2":"0.50191525","3":"48.135607","4":"51.36247781","5":"0.048135607","_rn_":"128"},{"1":"2020-07-17","2":"0.47775525","3":"47.678411","4":"51.84383388","5":"0.047678411","_rn_":"129"},{"1":"2020-07-18","2":"0.45497664","3":"47.224405","4":"52.32061799","5":"0.047224405","_rn_":"130"},{"1":"2020-07-19","2":"0.43349064","3":"46.773647","4":"52.79286204","5":"0.046773647","_rn_":"131"},{"1":"2020-07-20","2":"0.41321470","3":"46.326187","4":"53.26059851","5":"0.046326187","_rn_":"132"},{"1":"2020-07-21","2":"0.39407204","3":"45.882068","4":"53.72386038","5":"0.045882068","_rn_":"133"},{"1":"2020-07-22","2":"0.37599120","3":"45.441328","4":"54.18268106","5":"0.045441328","_rn_":"134"},{"1":"2020-07-23","2":"0.35890566","3":"45.004000","4":"54.63709433","5":"0.045004000","_rn_":"135"},{"1":"2020-07-24","2":"0.34275347","3":"44.570112","4":"55.08713434","5":"0.044570112","_rn_":"136"},{"1":"2020-07-25","2":"0.32747691","3":"44.139688","4":"55.53283546","5":"0.044139688","_rn_":"137"},{"1":"2020-07-26","2":"0.31302218","3":"43.712745","4":"55.97423233","5":"0.043712745","_rn_":"138"},{"1":"2020-07-27","2":"0.29933912","3":"43.289301","4":"56.41135979","5":"0.043289301","_rn_":"139"},{"1":"2020-07-28","2":"0.28638094","3":"42.869366","4":"56.84425280","5":"0.042869366","_rn_":"140"},{"1":"2020-07-29","2":"0.27410397","3":"42.452950","4":"57.27294646","5":"0.042452950","_rn_":"141"},{"1":"2020-07-30","2":"0.26246745","3":"42.040057","4":"57.69747596","5":"0.042040057","_rn_":"142"},{"1":"2020-07-31","2":"0.25143330","3":"41.630690","4":"58.11787652","5":"0.041630690","_rn_":"143"},{"1":"2020-08-01","2":"0.24096596","3":"41.224851","4":"58.53418343","5":"0.041224851","_rn_":"144"},{"1":"2020-08-02","2":"0.23103217","3":"40.822536","4":"58.94643193","5":"0.040822536","_rn_":"145"},{"1":"2020-08-03","2":"0.22160086","3":"40.423742","4":"59.35465729","5":"0.040423742","_rn_":"146"},{"1":"2020-08-04","2":"0.21264292","3":"40.028462","4":"59.75889471","5":"0.040028462","_rn_":"147"},{"1":"2020-08-05","2":"0.20413115","3":"39.636690","4":"60.15917933","5":"0.039636690","_rn_":"148"},{"1":"2020-08-06","2":"0.19604007","3":"39.248414","4":"60.55554623","5":"0.039248414","_rn_":"149"},{"1":"2020-08-07","2":"0.18834581","3":"38.863624","4":"60.94803036","5":"0.038863624","_rn_":"150"},{"1":"2020-08-08","2":"0.18102601","3":"38.482307","4":"61.33666660","5":"0.038482307","_rn_":"151"},{"1":"2020-08-09","2":"0.17405971","3":"38.104451","4":"61.72148968","5":"0.038104451","_rn_":"152"},{"1":"2020-08-10","2":"0.16742726","3":"37.730039","4":"62.10253418","5":"0.037730039","_rn_":"153"},{"1":"2020-08-11","2":"0.16111022","3":"37.359055","4":"62.47983457","5":"0.037359055","_rn_":"154"},{"1":"2020-08-12","2":"0.15509129","3":"36.991484","4":"62.85342512","5":"0.036991484","_rn_":"155"},{"1":"2020-08-13","2":"0.14935424","3":"36.627306","4":"63.22333996","5":"0.036627306","_rn_":"156"},{"1":"2020-08-14","2":"0.14388379","3":"36.266503","4":"63.58961301","5":"0.036266503","_rn_":"157"},{"1":"2020-08-15","2":"0.13866563","3":"35.909056","4":"63.95227805","5":"0.035909056","_rn_":"158"},{"1":"2020-08-16","2":"0.13368628","3":"35.554945","4":"64.31136861","5":"0.035554945","_rn_":"159"},{"1":"2020-08-17","2":"0.12893307","3":"35.204149","4":"64.66691806","5":"0.035204149","_rn_":"160"},{"1":"2020-08-18","2":"0.12439409","3":"34.856646","4":"65.01895955","5":"0.034856646","_rn_":"161"},{"1":"2020-08-19","2":"0.12005813","3":"34.512416","4":"65.36752601","5":"0.034512416","_rn_":"162"},{"1":"2020-08-20","2":"0.11591464","3":"34.171435","4":"65.71265017","5":"0.034171435","_rn_":"163"},{"1":"2020-08-21","2":"0.11195367","3":"33.833682","4":"66.05436452","5":"0.033833682","_rn_":"164"},{"1":"2020-08-22","2":"0.10816586","3":"33.499133","4":"66.39270134","5":"0.033499133","_rn_":"165"},{"1":"2020-08-23","2":"0.10454240","3":"33.167765","4":"66.72769267","5":"0.033167765","_rn_":"166"},{"1":"2020-08-24","2":"0.10107496","3":"32.839555","4":"67.05937032","5":"0.032839555","_rn_":"167"},{"1":"2020-08-25","2":"0.09775570","3":"32.514478","4":"67.38776587","5":"0.032514478","_rn_":"168"},{"1":"2020-08-26","2":"0.09457723","3":"32.192512","4":"67.71291065","5":"0.032192512","_rn_":"169"},{"1":"2020-08-27","2":"0.09153255","3":"31.873632","4":"68.03483577","5":"0.031873632","_rn_":"170"},{"1":"2020-08-28","2":"0.08861508","3":"31.557813","4":"68.35357209","5":"0.031557813","_rn_":"171"},{"1":"2020-08-29","2":"0.08581858","3":"31.245031","4":"68.66915022","5":"0.031245031","_rn_":"172"},{"1":"2020-08-30","2":"0.08313717","3":"30.935262","4":"68.98160053","5":"0.030935262","_rn_":"173"},{"1":"2020-08-31","2":"0.08056530","3":"30.628482","4":"69.29095315","5":"0.030628482","_rn_":"174"},{"1":"2020-09-01","2":"0.07809771","3":"30.324664","4":"69.59723797","5":"0.030324664","_rn_":"175"},{"1":"2020-09-02","2":"0.07572942","3":"30.023786","4":"69.90048461","5":"0.030023786","_rn_":"176"},{"1":"2020-09-03","2":"0.07345574","3":"29.725822","4":"70.20072247","5":"0.029725822","_rn_":"177"},{"1":"2020-09-04","2":"0.07127221","3":"29.430747","4":"70.49798069","5":"0.029430747","_rn_":"178"},{"1":"2020-09-05","2":"0.06917461","3":"29.138537","4":"70.79228816","5":"0.029138537","_rn_":"179"},{"1":"2020-09-06","2":"0.06715897","3":"28.849168","4":"71.08367353","5":"0.028849168","_rn_":"180"},{"1":"2020-09-07","2":"0.06522149","3":"28.562613","4":"71.37216521","5":"0.028562613","_rn_":"181"},{"1":"2020-09-08","2":"0.06335859","3":"28.278850","4":"71.65779134","5":"0.028278850","_rn_":"182"},{"1":"2020-09-09","2":"0.06156688","3":"27.997853","4":"71.94057984","5":"0.027997853","_rn_":"183"},{"1":"2020-09-10","2":"0.05984314","3":"27.719598","4":"72.22055837","5":"0.027719598","_rn_":"184"},{"1":"2020-09-11","2":"0.05818431","3":"27.444061","4":"72.49775436","5":"0.027444061","_rn_":"185"},{"1":"2020-09-12","2":"0.05658750","3":"27.171218","4":"72.77219497","5":"0.027171218","_rn_":"186"},{"1":"2020-09-13","2":"0.05504995","3":"26.901043","4":"73.04390715","5":"0.026901043","_rn_":"187"},{"1":"2020-09-14","2":"0.05356905","3":"26.633513","4":"73.31291758","5":"0.026633513","_rn_":"188"},{"1":"2020-09-15","2":"0.05214232","3":"26.368605","4":"73.57925271","5":"0.026368605","_rn_":"189"},{"1":"2020-09-16","2":"0.05076739","3":"26.106294","4":"73.84293876","5":"0.026106294","_rn_":"190"},{"1":"2020-09-17","2":"0.04944205","3":"25.846556","4":"74.10400170","5":"0.025846556","_rn_":"191"},{"1":"2020-09-18","2":"0.04816414","3":"25.589369","4":"74.36246726","5":"0.025589369","_rn_":"192"},{"1":"2020-09-19","2":"0.04693165","3":"25.334707","4":"74.61836095","5":"0.025334707","_rn_":"193"},{"1":"2020-09-20","2":"0.04574265","3":"25.082549","4":"74.87170802","5":"0.025082549","_rn_":"194"},{"1":"2020-09-21","2":"0.04459531","3":"24.832871","4":"75.12253351","5":"0.024832871","_rn_":"195"},{"1":"2020-09-22","2":"0.04348788","3":"24.585650","4":"75.37086223","5":"0.024585650","_rn_":"196"},{"1":"2020-09-23","2":"0.04241870","3":"24.340863","4":"75.61671872","5":"0.024340863","_rn_":"197"},{"1":"2020-09-24","2":"0.04138619","3":"24.098486","4":"75.86012735","5":"0.024098486","_rn_":"198"},{"1":"2020-09-25","2":"0.04038885","3":"23.858499","4":"76.10111221","5":"0.023858499","_rn_":"199"},{"1":"2020-09-26","2":"0.03942523","3":"23.620878","4":"76.33969720","5":"0.023620878","_rn_":"200"},{"1":"2020-09-27","2":"0.03849397","3":"23.385600","4":"76.57590598","5":"0.023385600","_rn_":"201"},{"1":"2020-09-28","2":"0.03759377","3":"23.152644","4":"76.80976198","5":"0.023152644","_rn_":"202"},{"1":"2020-09-29","2":"0.03672337","3":"22.921988","4":"77.04128842","5":"0.022921988","_rn_":"203"},{"1":"2020-09-30","2":"0.03588160","3":"22.693610","4":"77.27050830","5":"0.022693610","_rn_":"204"},{"1":"2020-10-01","2":"0.03506732","3":"22.467488","4":"77.49744441","5":"0.022467488","_rn_":"205"},{"1":"2020-10-02","2":"0.03427944","3":"22.243601","4":"77.72211929","5":"0.022243601","_rn_":"206"},{"1":"2020-10-03","2":"0.03351694","3":"22.021928","4":"77.94455530","5":"0.022021928","_rn_":"207"},{"1":"2020-10-04","2":"0.03277884","3":"21.802447","4":"78.16477458","5":"0.021802447","_rn_":"208"},{"1":"2020-10-05","2":"0.03206418","3":"21.585137","4":"78.38279904","5":"0.021585137","_rn_":"209"},{"1":"2020-10-06","2":"0.03137207","3":"21.369978","4":"78.59865041","5":"0.021369978","_rn_":"210"},{"1":"2020-10-07","2":"0.03070165","3":"21.156948","4":"78.81235019","5":"0.021156948","_rn_":"211"},{"1":"2020-10-08","2":"0.03005209","3":"20.946028","4":"79.02391967","5":"0.020946028","_rn_":"212"},{"1":"2020-10-09","2":"0.02942262","3":"20.737197","4":"79.23337995","5":"0.020737197","_rn_":"213"},{"1":"2020-10-10","2":"0.02881248","3":"20.530436","4":"79.44075193","5":"0.020530436","_rn_":"214"},{"1":"2020-10-11","2":"0.02822095","3":"20.325723","4":"79.64605628","5":"0.020325723","_rn_":"215"},{"1":"2020-10-12","2":"0.02764734","3":"20.123039","4":"79.84931351","5":"0.020123039","_rn_":"216"},{"1":"2020-10-13","2":"0.02709099","3":"19.922365","4":"80.05054390","5":"0.019922365","_rn_":"217"},{"1":"2020-10-14","2":"0.02655127","3":"19.723681","4":"80.24976755","5":"0.019723681","_rn_":"218"},{"1":"2020-10-15","2":"0.02602758","3":"19.526968","4":"80.44700436","5":"0.019526968","_rn_":"219"},{"1":"2020-10-16","2":"0.02551934","3":"19.332207","4":"80.64227404","5":"0.019332207","_rn_":"220"},{"1":"2020-10-17","2":"0.02502600","3":"19.139378","4":"80.83559611","5":"0.019139378","_rn_":"221"},{"1":"2020-10-18","2":"0.02454701","3":"18.948463","4":"81.02698989","5":"0.018948463","_rn_":"222"},{"1":"2020-10-19","2":"0.02408189","3":"18.759444","4":"81.21647452","5":"0.018759444","_rn_":"223"},{"1":"2020-10-20","2":"0.02363012","3":"18.572301","4":"81.40406896","5":"0.018572301","_rn_":"224"},{"1":"2020-10-21","2":"0.02319126","3":"18.387017","4":"81.58979197","5":"0.018387017","_rn_":"225"},{"1":"2020-10-22","2":"0.02276484","3":"18.203573","4":"81.77366213","5":"0.018203573","_rn_":"226"},{"1":"2020-10-23","2":"0.02235044","3":"18.021952","4":"81.95569786","5":"0.018021952","_rn_":"227"},{"1":"2020-10-24","2":"0.02194764","3":"17.842135","4":"82.13591738","5":"0.017842135","_rn_":"228"},{"1":"2020-10-25","2":"0.02155605","3":"17.664105","4":"82.31433873","5":"0.017664105","_rn_":"229"},{"1":"2020-10-26","2":"0.02117528","3":"17.487845","4":"82.49097978","5":"0.017487845","_rn_":"230"},{"1":"2020-10-27","2":"0.02080497","3":"17.313337","4":"82.66585823","5":"0.017313337","_rn_":"231"},{"1":"2020-10-28","2":"0.02044477","3":"17.140564","4":"82.83899160","5":"0.017140564","_rn_":"232"},{"1":"2020-10-29","2":"0.02009433","3":"16.969508","4":"83.01039724","5":"0.016969508","_rn_":"233"},{"1":"2020-10-30","2":"0.01975334","3":"16.800154","4":"83.18009232","5":"0.016800154","_rn_":"234"},{"1":"2020-10-31","2":"0.01942148","3":"16.632485","4":"83.34809386","5":"0.016632485","_rn_":"235"},{"1":"2020-11-01","2":"0.01909845","3":"16.466483","4":"83.51441871","5":"0.016466483","_rn_":"236"},{"1":"2020-11-02","2":"0.01878397","3":"16.302132","4":"83.67908354","5":"0.016302132","_rn_":"237"},{"1":"2020-11-03","2":"0.01847775","3":"16.139417","4":"83.84210486","5":"0.016139417","_rn_":"238"},{"1":"2020-11-04","2":"0.01817953","3":"15.978321","4":"84.00349904","5":"0.015978321","_rn_":"239"},{"1":"2020-11-05","2":"0.01788905","3":"15.818829","4":"84.16328225","5":"0.015818829","_rn_":"240"},{"1":"2020-11-06","2":"0.01760607","3":"15.660923","4":"84.32147054","5":"0.015660923","_rn_":"241"},{"1":"2020-11-07","2":"0.01733034","3":"15.504590","4":"84.47807977","5":"0.015504590","_rn_":"242"},{"1":"2020-11-08","2":"0.01706164","3":"15.349813","4":"84.63312567","5":"0.015349813","_rn_":"243"},{"1":"2020-11-09","2":"0.01679975","3":"15.196576","4":"84.78662380","5":"0.015196576","_rn_":"244"},{"1":"2020-11-10","2":"0.01654445","3":"15.044866","4":"84.93858956","5":"0.015044866","_rn_":"245"},{"1":"2020-11-11","2":"0.01629554","3":"14.894666","4":"85.08903822","5":"0.014894666","_rn_":"246"},{"1":"2020-11-12","2":"0.01605282","3":"14.745962","4":"85.23798489","5":"0.014745962","_rn_":"247"},{"1":"2020-11-13","2":"0.01581611","3":"14.598739","4":"85.38544451","5":"0.014598739","_rn_":"248"},{"1":"2020-11-14","2":"0.01558521","3":"14.452983","4":"85.53143190","5":"0.014452983","_rn_":"249"},{"1":"2020-11-15","2":"0.01535996","3":"14.308678","4":"85.67596173","5":"0.014308678","_rn_":"250"},{"1":"2020-11-16","2":"0.01514018","3":"14.165811","4":"85.81904851","5":"0.014165811","_rn_":"251"},{"1":"2020-11-17","2":"0.01492571","3":"14.024368","4":"85.96070663","5":"0.014024368","_rn_":"252"},{"1":"2020-11-18","2":"0.01471638","3":"13.884333","4":"86.10095030","5":"0.013884333","_rn_":"253"},{"1":"2020-11-19","2":"0.01451206","3":"13.745694","4":"86.23979364","5":"0.013745694","_rn_":"254"},{"1":"2020-11-20","2":"0.01431258","3":"13.608437","4":"86.37725058","5":"0.013608437","_rn_":"255"},{"1":"2020-11-21","2":"0.01411781","3":"13.472547","4":"86.51333495","5":"0.013472547","_rn_":"256"},{"1":"2020-11-22","2":"0.01392760","3":"13.338012","4":"86.64806042","5":"0.013338012","_rn_":"257"},{"1":"2020-11-23","2":"0.01374184","3":"13.204818","4":"86.78144054","5":"0.013204818","_rn_":"258"},{"1":"2020-11-24","2":"0.01356038","3":"13.072951","4":"86.91348872","5":"0.013072951","_rn_":"259"},{"1":"2020-11-25","2":"0.01338310","3":"12.942399","4":"87.04421823","5":"0.012942399","_rn_":"260"},{"1":"2020-11-26","2":"0.01320990","3":"12.813148","4":"87.17364221","5":"0.012813148","_rn_":"261"},{"1":"2020-11-27","2":"0.01304063","3":"12.685186","4":"87.30177369","5":"0.012685186","_rn_":"262"},{"1":"2020-11-28","2":"0.01287521","3":"12.558499","4":"87.42862555","5":"0.012558499","_rn_":"263"},{"1":"2020-11-29","2":"0.01271352","3":"12.433076","4":"87.55421054","5":"0.012433076","_rn_":"264"},{"1":"2020-11-30","2":"0.01255545","3":"12.308903","4":"87.67854130","5":"0.012308903","_rn_":"265"},{"1":"2020-12-01","2":"0.01240091","3":"12.185969","4":"87.80163033","5":"0.012185969","_rn_":"266"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The output contains a column for the simulation date, one column for each state variable (<code>S</code>, <code>I</code> and <code>R</code> in this case), and one column for every time-varying rate (<code>S_to_I</code>). The names of the time-varying rates are always of the form <code>{from_state}_to_{to_state}</code>. The reason why <code>S_to_I</code> is time-varying in this model is that it depends on a state variable, <code>I</code>, which is itself varying at every time-step. The <code>rate_summary</code> function can be used to remind us of this fact.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="simulation.html#cb22-1"></a>(sir</span>
<span id="cb22-2"><a href="simulation.html#cb22-2"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rate_summary</span>(<span class="dt">include_formula =</span> <span class="ot">TRUE</span>) </span>
<span id="cb22-3"><a href="simulation.html#cb22-3"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(from, to, formula)</span>
<span id="cb22-4"><a href="simulation.html#cb22-4"></a>)</span></code></pre></div>
<pre><code>##        from to              formula
## S_to_I    S  I (I) * (beta) * (1/N)
## I_to_R    I  R              (gamma)</code></pre>
<p>We see here that <code>S_to_I</code> does indeed depend on <code>I</code> in its formula, whereas <code>I_to_R</code> depends only on a parameter, <code>gamma</code>.</p>
<p>Note that the above command uses the tidyverse-style pipe, <code>%&gt;%</code>, operator and another tidyverse function, <code>select</code>. This illustrates a general philosophy of McMasterPandemic, which is that we try to make the outputs plug into other existing and popular tools rather than reinvent existing functionality for a narrower purpose. For example, the <code>rate_summary</code> function returns a data frame that can be manipulated by other data frame manipulation tools.</p>
<p>We can plug into other existing and popular tools to make a plot of the simulated epidemic trajectory.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="simulation.html#cb24-1"></a>(sir</span>
<span id="cb24-2"><a href="simulation.html#cb24-2"></a> <span class="op">%&gt;%</span><span class="st"> </span>simulation_history</span>
<span id="cb24-3"><a href="simulation.html#cb24-3"></a> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>S_to_I)</span>
<span id="cb24-4"><a href="simulation.html#cb24-4"></a> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Date, <span class="dt">names_to =</span> <span class="st">&quot;State&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Population&quot;</span>)</span>
<span id="cb24-5"><a href="simulation.html#cb24-5"></a> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">State =</span> <span class="kw">factor</span>(State, <span class="dt">levels =</span> <span class="kw">topological_sort</span>(sir)))</span>
<span id="cb24-6"><a href="simulation.html#cb24-6"></a> <span class="op">%&gt;%</span><span class="st"> </span>ggplot</span>
<span id="cb24-7"><a href="simulation.html#cb24-7"></a> <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(Date, Population, <span class="dt">colour =</span> State))</span>
<span id="cb24-8"><a href="simulation.html#cb24-8"></a>)</span></code></pre></div>
<p><img src="_main_files/figure-html/sir_sim-1.png" width="672" /></p>
<div class="infobox caution">
<p>There are a few places you can go from here:</p>
<ol style="list-style-type: decimal">
<li>Learn how to fit a model to observed data through <a href="calibration.html#calibration">Calibration</a></li>
<li>Learn how to modify the values of parameters in simulation time using <a href="time-varying-parameters.html#time-varying-parameters">Time Varying Parameters</a></li>
<li>Keep reading to learn about simulating with <a href="simulation.html#observation-error">Observation Error</a></li>
</ol>
</div>
<div id="observation-error" class="section level2 hasAnchor">
<h2><span class="header-section-number">4.1</span> Observation Error<a href="simulation.html#observation-error" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="simulation.html#cb25-1"></a>sir_with_obs_err =<span class="st"> </span>(sir</span>
<span id="cb25-2"><a href="simulation.html#cb25-2"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">update_params</span>(<span class="kw">c</span>(</span>
<span id="cb25-3"><a href="simulation.html#cb25-3"></a>    <span class="dt">nb_disp_S =</span> <span class="fl">1e4</span>,</span>
<span id="cb25-4"><a href="simulation.html#cb25-4"></a>    <span class="dt">nb_disp_I =</span> <span class="fl">1e4</span>,</span>
<span id="cb25-5"><a href="simulation.html#cb25-5"></a>    <span class="dt">nb_disp_R =</span> <span class="fl">1e4</span></span>
<span id="cb25-6"><a href="simulation.html#cb25-6"></a>  ))</span>
<span id="cb25-7"><a href="simulation.html#cb25-7"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">update_error_dist</span>(</span>
<span id="cb25-8"><a href="simulation.html#cb25-8"></a>    S <span class="op">~</span><span class="st"> </span><span class="kw">negative_binomial</span>(<span class="st">&quot;nb_disp_S&quot;</span>),</span>
<span id="cb25-9"><a href="simulation.html#cb25-9"></a>    I <span class="op">~</span><span class="st"> </span><span class="kw">negative_binomial</span>(<span class="st">&quot;nb_disp_I&quot;</span>),</span>
<span id="cb25-10"><a href="simulation.html#cb25-10"></a>    R <span class="op">~</span><span class="st"> </span><span class="kw">negative_binomial</span>(<span class="st">&quot;nb_disp_R&quot;</span>)</span>
<span id="cb25-11"><a href="simulation.html#cb25-11"></a>  )</span>
<span id="cb25-12"><a href="simulation.html#cb25-12"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="simulation.html#cb26-1"></a><span class="kw">set.seed</span>(1L)</span>
<span id="cb26-2"><a href="simulation.html#cb26-2"></a>(sir_with_obs_err</span>
<span id="cb26-3"><a href="simulation.html#cb26-3"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">simulation_history</span>(<span class="dt">obs_error =</span> <span class="ot">TRUE</span>)</span>
<span id="cb26-4"><a href="simulation.html#cb26-4"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Date, S, I, R)</span>
<span id="cb26-5"><a href="simulation.html#cb26-5"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Date, <span class="dt">names_to =</span> <span class="st">&quot;var&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb26-6"><a href="simulation.html#cb26-6"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">date =</span> Date)</span>
<span id="cb26-7"><a href="simulation.html#cb26-7"></a>  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">var =</span> <span class="kw">factor</span>(var, <span class="dt">levels =</span> <span class="kw">topological_sort</span>(sir)))</span>
<span id="cb26-8"><a href="simulation.html#cb26-8"></a>  <span class="op">%&gt;%</span><span class="st"> </span>ggplot</span>
<span id="cb26-9"><a href="simulation.html#cb26-9"></a>  <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>var)</span>
<span id="cb26-10"><a href="simulation.html#cb26-10"></a>  <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(date, value))</span>
<span id="cb26-11"><a href="simulation.html#cb26-11"></a>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_obs_err-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="flow-between-states.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="calibration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/canmod/macpan-book/edit/main/03-simulating.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
